/*! Bootstrap FileUpload - v0.6.0 - 2016-05-19
* https://github.com/lleblanc42/bootstrap-FileUpload
* Copyright (c) 2016 Luke LeBlanc; Licensed GPL-3.0 */
!function(a,b,c,d){"use strict";function e(b){return p[b].wrapper=a("#"+b),q.archives=["zip","7z","gz","gzip","rar","tar"],q.audio=["mp3","wav","wma","wpl","aac","flac","m4a","m4b","m4p","midi","ogg"],q.files=["doc","docx","dotx","docm","ods","odt","ott","ods","pdf","ppt","pptm","pptx","pub","rtf","csv","log","txt","xls","xlsm","xlsx"],q.images=["bmp","tif","tiff","gif","jpeg","jpg","png","svg","ico","raw"],q.video=["avi","flv","swf","m4v","mkv","mov","mp4","ogv","wmv"],j(b),p[b].options.debug!==!0&&p[b].options.debug!==!1&&(p[b].options.debug=!0),"function"!=typeof a().emulateTransitionEnd?void o(b,"bootstrap"):a("link[href$='font-awesome.css']").length||a("link[href$='font-awesome.min.css']").length||p[b].options.showThumb!==!0?null!==p[b].options.url&&n(p[b].options.url)?"post"!==p[b].options.formMethod&&"get"!==p[b].options.formMethod?void o(b,"formMethod"):null===p[b].options.fallbackUrl||n(p[b].options.fallbackUrl)?(m&&p[b].options.forceFallback===!1?f(b):g(b),void("function"==typeof p[b].options.onInit&&p[b].options.onInit.call(this))):void o(b,"fallbackUrl"):void o(b,"url"):void o(b,"fontAwesome")}function f(b){p[b].formData=new FormData,p[b].form=a('<form action="'+p[b].options.url+'" method="'+p[b].options.formMethod+'" enctype="multipart/form-data"></form>'),p[b].btnBar=a('<div class="row fileupload-buttonbar"></div>'),p[b].btnWrapper=a('<div class="col-lg-7"></div>'),p[b].btnAdd=a('<div class="btn btn-success fileupload-add"><input type="file" '+(p[b].options.multiFile===!0?'multiple="multiple"':void 0)+'multiple /><i class="glyphicon glyphicon-plus"></i>&nbsp;Add Files&hellip;</div>'),p[b].btnReset=a('<button type="reset" class="btn btn-primary fileupload-reset"><i class="glyphicon glyphicon-repeat"></i>&nbsp;Add More Files&hellip;</button>'),p[b].btnStart=a('<button class="btn btn-warning fileupload-start"><i class="glyphicon glyphicon-upload"></i>&nbsp;<span>Start upload</span></button>'),p[b].btnCancel=a('<button type="reset" class="btn btn-danger fileupload-cancel"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Cancel upload</span></button>'),p[b].overallProgressBar=a('<div class="col-lg-5 fileupload-overall-progress"><div class="progress"><div class="progress-bar progress-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-extended">&nbsp;</div></div></div>'),p[b].overallStatus=a('<div class="row fileupload-overall-status"><div class="col-lg-12"><div class="alert alert-success"><strong>Uploaded Successfully!</strong></div><div class="alert alert-danger"></div></div></div>'),p[b].filePreviewTable=a('<table role="presentation" class="table table-striped fileupload-preview"><tbody class="files"></tbody></table>'),p[b].btnWrapper.append(p[b].btnAdd,p[b].btnReset,p[b].btnStart,p[b].btnCancel),p[b].btnBar.append(p[b].btnWrapper,p[b].overallProgressBar),p[b].form.append(p[b].btnBar,p[b].overallStatus),p[b].wrapper.append(p[b].form,p[b].filePreviewTable),p[b].btnAdd.on("change","input",function(a){r.addFile(b,a)}),p[b].btnReset.on("click",function(a){a.preventDefault(),r.resetUpload(b)}),p[b].btnStart.on("click",function(a){a.preventDefault(),r.uploadStart(b)}),p[b].btnCancel.on("click",function(){r.resetUpload(b)}),p[b].filePreviewTable.on("click",".fileupload-remove",function(){r.removeFile(b,a(this).val())})}function g(b){p[b].form=a('<form action="'+(p[b].options.fallbackUrl?p[b].options.fallbackUrl:p[b].options.url)+'" method="'+p[b].options.formMethod+'" enctype="multipart/form-data"></form>'),p[b].btnAdd=a('<div class="input-group"><span class="input-group-btn"><span class="btn btn-success fileupload-fallback-add"><i class="glyphicon glyphicon-plus"></i>&nbsp;Add Files&hellip; <input type="file" name="'+p[b].options.inputName+'" '+(p[b].options.multiFile===!0?'multiple="multiple"':void 0)+'></span></span><input type="text" class="form-control" readonly></div>'),p[b].btnStart=a('<div class="form-group"><button type="submit" class="btn btn-warning fileupload-fallback-start"><i class="glyphicon glyphicon-upload"></i>&nbsp;<span>Start upload</span></button><button type="reset" class="btn btn-primary fileupload-fallback-reset"><i class="glyphicon glyphicon-repeat"></i>&nbsp;Reset</button></div>'),p[b].form.append(p[b].btnAdd,p[b].btnStart),p[b].options.hiddenInput&&a.each(p[b].options.hiddenInput,function(a,c){p[b].form.append('<input type="hidden" name="'+a+'" value="'+c+'" />')}),p[b].wrapper.append(p[b].form),p[b].btnAdd.on("change",".fileupload-fallback-add input[type=file]",function(){var b,c,d;b=a(this),c=b.get(0).files?b.get(0).files.length:1,d=b.val().replace(/\\/g,"/").replace(/.*\//,""),b.trigger("fileselect",[c,d])}),p[b].btnAdd.find(".fileupload-fallback-add input[type=file]").on("fileselect",function(b,c,d){var e,f;e=a(this).parents(".input-group").find("input[type=text]"),f=c>1?c+" files selected":d,e.length&&e.val(f)})}function h(a,b,c,d){var e;switch(c){case"archives":e='<i class="fa fa-file-archive-o fa-5x"></i>';break;case"audio":e='<i class="fa fa-file-audio-o fa-5x"></i>';break;case"files":switch(d){case"doc":e='<i class="fa fa-file-word-o fa-5x"></i>';break;case"docx":e='<i class="fa fa-file-word-o fa-5x"></i>';break;case"dotx":e='<i class="fa fa-file-word-o fa-5x"></i>';break;case"docm":e='<i class="fa fa-file-word-o fa-5x"></i>';break;case"ppt":e='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pptm":e='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pptx":e='<i class="fa fa-file-powerpoint-o fa-5x"></i>';break;case"pdf":e='<i class="fa fa-file-pdf-o fa-5x"></i>';break;case"xls":e='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"csv":e='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"xlsm":e='<i class="fa fa-file-excel-o fa-5x"></i>';break;case"xlsx":e='<i class="fa fa-file-excel-o fa-5x"></i>';break;default:e='<i class="fa fa-file-o fa-5x"></i>'}break;case"images":e='<img src="'+URL.createObjectURL(b)+'" alt="'+b.name+'" width="'+p[a].options.thumbWidth+'px" height="'+p[a].options.thumbHeight+'px" class="fileupload-previewimg" />';break;case"video":e='<i class="fa fa-file-movie-o fa-5x"></i>'}return e}function i(b,c){var d=[];return a.each(p[b].arrayFiles,function(a,b){d.push(b.name)}),a.inArray(c.name,d)}function j(b){a.each(p[b].options.fileTypes,function(c,d){a.isNumeric(c)?p[b].options.fileTypes[d]=q[d]:!a.isNumeric(c)&&a.isEmptyObject(d)&&(p[b].options.fileTypes[c]=q[c])})}function k(b,c){var d;return a.each(p[b].options.fileTypes,function(b,e){return a.inArray(c,e)>=0?(d=b,!1):void 0}),d}function l(b,c){var d=!1;return a.each(p[b].options.fileTypes,function(b,e){return a.inArray(c,e)>=0?(d=!0,!1):void 0}),d}function m(){var a=new XMLHttpRequest;return!!(c.FormData&&a&&"upload"in a&&"onprogress"in a.upload)}function n(a){return/((http(s)?|ftp(s)?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/.test(a)}function o(b,d){var e,f=a('<div class="alert alert-danger" role="alert"></div>');switch(d){case"method":e="The passed method "+name+" is not a valid method. Please check the configuration.";break;case"fontAwesome":e="The Font Awesome CSS is not available within the head of the website and is a required unless the option showThumb is set to false.";break;case"url":e="The URL provided in the configuration is not a valid URL.";break;case"fallbackUrl":e="The Fallback URL provided in the configuration is not a valid URL.";break;case"formMethod":e="The Form Method provided in the configuration is not a valid, please choose either get or post in the configuration.";break;case"bootstrap":e="The Twitter Bootstrap API is not available on the current page. Please check to make sure all the dependencies are in place.";break;default:e="An unknown error occured."}p[b].options.debug===!1&&c.console&&c.console.error?c.console.error(e):p[b].options.debug===!0&&(f.append(e),wrapper.append(f))}var p={},q={},r={init:function(b){return p[a(this).attr("id")]={options:a.extend({},a.fn.bootstrapFileUpload.defaults,b||{}),wrapper:null,form:null,btnBar:null,btnWrapper:null,btnAdd:null,btnStart:null,btnCancel:null,btnReset:null,overallProgressBar:null,overallStatus:null,filePreviewTable:null,formData:null,arrayFiles:{},arrayLength:0},this.each(function(){e(a(this).attr("id"))})},addFile:function(a,b){var d=b.target.files,e=d.length;p[a].options.multiFile===!0&&p[a].options.maxFiles&&e>p[a].options.maxFiles&&(c.alert("You're trying to upload "+e+" files and only "+p[a].options.maxFiles+" files is currently supported! The system will only upload what is supported and you will have to upload again."),e=p[a].options.maxFiles),p[a].filePreviewTable.detach();for(var f=0;e>f;f++){var g,j,m,n,o,q;if(g="file-"+f,n=d[f],o=n.size/1024/1024,j=n.name.split(".").pop().toLowerCase(),l(a,j)!==!1)if(m=k(a,j),o.toFixed(2)>p[a].options.maxSize)c.alert('The file size for "'+n.name+'" is too large! Maximum supported file size is '+p[a].options.maxSize+"MB and the size of the file is "+o+"MB");else if(p[a].arrayFiles&&i(a,n)>=0)c.alert('The file "'+n.name+'" is already in queue!');else{p[a].arrayFiles[g]=n,p[a].arrayLength=++p[a].arrayLength,p[a].btnStart.fadeIn("slow","linear"),p[a].btnCancel.fadeIn("slow","linear");var r='<div class="progress fileupload-progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div><div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;"></div></div><div class="alert alert-success"><strong>Uploaded Successfully!</strong></div><div class="alert alert-danger"></div>';if(p[a].options.showThumb===!0){var s=h(a,n,m,j);q=p[a].options.multiUpload===!1?'<tr class="fileupload-previewrow thumb row" id="'+g+'"><td class="col-lg-1">'+s+'</td><td class="col-lg-4">'+n.name+'</td><td class="col-lg-6">'+r+'</td><td class="col-lg-1"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>':'<tr class="fileupload-previewrow thumb row" id="'+g+'"><td class="col-lg-1">'+s+'</td><td class="col-lg-9">'+n.name+'</td><td class="col-lg-2"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>'}else q=options.multiUpload===!1?'<tr class="fileupload-previewrow no-thumb row" id="'+g+'"><td class="col-lg-5">'+n.name+'</td><td class="col-lg-6">'+r+'</td><td class="col-lg-1"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>':'<tr class="fileupload-previewrow no-thumb row" id="'+g+'"><td class="col-lg-10">'+n.name+'</td><td class="col-lg-2"><button class="btn btn-danger fileupload-remove" value="'+g+'"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;<span>Remove File</span></button></td></tr>';p[a].filePreviewTable.append(q)}else c.alert('The file "'+n.name+'" is not a supported filetype!')}p[a].wrapper.append(p[a].filePreviewTable),p[a].filePreviewTable.fadeIn("slow","linear"),"function"==typeof p[a].options.onFileAdded&&p[a].options.onFileAdded.call(this)},uploadStart:function(b){a(".fileupload-add, .fileupload-start, .fileupload-cancel, .fileupload-remove").attr("disabled","disabled"),p[b].options.hiddenInput&&a.each(p[b].options.hiddenInput,function(a,c){p[b].formData.append(a,c)}),p[b].options.multiUpload===!1?a.each(p[b].arrayFiles,function(c,d){p[b].formData.append(p[b].options.inputName,d),a("#"+c+" .fileupload-progress .progress-bar-striped").fadeIn("slow","linear"),a.ajax({url:p[b].options.url,type:p[b].options.formMethod,data:p[b].formData,cache:!1,contentType:!1,processData:!1,accepts:"json",success:function(d,e,f){var g=JSON.parse(d);g.error?(a("#"+c+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+c+" .fileupload-progress .progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),a("#"+c+" .alert-danger").fadeIn("slow","linear").html("<strong>Error:</strong><br />"+g.error)):(a("#"+c+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+c+" .fileupload-progress .progress-bar-success").attr("aria-valuenow",100).css("width","100%"),a("#"+c+" .alert-success").fadeIn("slow","linear")),"function"==typeof p[b].options.onUploadSuccess&&p[b].options.onUploadSuccess.call(this)},error:function(d,e,f){a("#"+c+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),a("#"+c+" .fileupload-progress .progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),a("#"+c+" .alert-danger").fadeIn("slow","linear").html(e+": "+f.message),"function"==typeof p[b].options.onUploadError&&p[b].options.onUploadError.call(this)},xhr:function(){var b=a.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(b){if(b.lengthComputable){var d=b.loaded/b.total;a("#"+c+" .fileupload-progress .progress-bar-striped").attr("aria-valuenow",Math.round(100*d)).css("width",Math.round(100*d)+"%")}}),b}}),"function"==typeof p[b].options.onUploadProgress&&p[b].options.onUploadProgress.call(this)}):(p[b].overallProgressBar.fadeIn("slow","linear"),a.each(p[b].arrayFiles,function(a,c){p[b].formData.append(p[b].options.inputName+"[]",c)}),a.ajax({url:p[b].options.url,type:p[b].options.formMethod,data:p[b].formData,cache:!1,contentType:!1,processData:!1,accepts:"json",success:function(a,c,d){var e=JSON.parse(a);e.error?(p[b].overallProgressBar.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),p[b].overallProgressBar.find(".progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),p[b].overallStatus.fadeIn("slow","linear"),p[b].overallStatus.find(".alert-danger").fadeIn("slow","linear").html("<strong>Error:</strong><br />"+e.error)):(p[b].overallProgressBar.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),p[b].overallProgressBar.find(".progress-bar-success").attr("aria-valuenow",100).css("width","100%"),p[b].overallStatus.fadeIn("slow","linear"),p[b].overallStatus.find(".alert-success").fadeIn("slow","linear")),"function"==typeof p[b].options.onUploadSuccess&&p[b].options.onUploadSuccess.call(this)},error:function(a,c,d){p[b].overallProgressBar.find(".progress-bar-striped").attr("aria-valuenow",0).css("width","0%"),p[b].overallProgressBar.find(".progress-bar-danger").attr("aria-valuenow",100).css("width","100%"),p[b].overallStatus.fadeIn("slow","linear"),p[b].overallStatus.find(".alert-danger").fadeIn("slow","linear").html(c+": "+d.message),"function"==typeof p[b].options.onUploadError&&p[b].options.onUploadError.call(this)},xhr:function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){if(a.lengthComputable){var c=a.loaded/a.total;p[b].overallProgressBar.find(".progress-bar-striped").attr("aria-valuenow",Math.round(100*c)).css("width",Math.round(100*c)+"%"),"function"==typeof p[b].options.onUploadProgress&&p[b].options.onUploadProgress.call(this)}}),c}})),p[b].btnAdd.fadeOut("slow","linear"),p[b].btnStart.fadeOut("slow","linear"),p[b].btnCancel.fadeOut("slow","linear"),p[b].btnReset.delay(600).fadeIn("slow","linear"),"function"==typeof p[b].options.onUploadComplete&&p[b].options.onUploadComplete.call(this)},removeFile:function(b,c){p[b].arrayLength<=1?r.resetUpload(b):(a("#"+c).fadeOut("slow","linear"),a("#"+c+" .alert").fadeOut("slow","linear"),a("#"+c).remove(),delete p[b].arrayFiles[c],p[b].arrayLength=--p[b].arrayLength),"function"==typeof p[b].options.onFileRemoved&&p[b].options.onFileRemoved.call(this)},resetUpload:function(b){p[b].filePreviewTable.find("tbody").empty(),p[b].form[0].reset(),p[b].arrayFiles={},p[b].arrayLength=0,p[b].filePreviewTable.fadeOut("slow","linear"),p[b].btnStart.fadeOut("slow","linear"),p[b].btnCancel.fadeOut("slow","linear"),a(".fileupload-previewrow .alert").fadeOut("slow","linear"),a(".fileupload-add, .fileupload-start, .fileupload-cancel").removeAttr("disabled"),a(".fileupload-add").delay(800).fadeIn("slow","linear"),p[b].overallProgressBar.find(".progress-bar-success").attr("aria-valuenow",0).css("width","0%"),p[b].overallProgressBar.fadeOut("slow","linear"),p[b].btnReset.fadeOut("slow","linear"),"function"==typeof p[b].options.onUploadReset&&p[b].options.onUploadReset.call(this)}};a.bootstrapFileUpload=a.fn.bootstrapFileUpload=function(a){return r[a]?r[a].apply(this,Array.prototype.slice.call(arguments,1)):void("object"!=typeof a&&a?c.console.error("The passed method "+a+" is not a valid method. Please check the configuration."):r.init.apply(this,arguments))},a.fn.bootstrapFileUpload.defaults={url:null,fallbackUrl:null,formMethod:"post",multiFile:!0,multiUpload:!1,inputName:"files",hiddenInput:null,forceFallback:!1,maxSize:5,maxFiles:null,showThumb:!0,thumbWidth:80,thumbHeight:80,fileTypes:{archives:[],audio:[],files:[],images:[],video:[]},debug:!0,onInit:function(){},onFileAdded:function(){},onFileRemoved:function(){},onFileCancel:function(){},onFileProcessing:function(){},onUploadProgress:function(){},onUploadError:function(){},onUploadSuccess:function(){},onUploadComplete:function(){},onUploadReset:function(){}}}(jQuery,document,window);